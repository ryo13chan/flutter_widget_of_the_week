最近のアプリは非同期性が高くなっています。

時と順序を選ばずにどんなことでも起こり得ます。

こうしたイベントはデータストリームと考えることができます。

Dart は非同期データストリームを大きくサポートしています。

Stream を使うのです。

では Flutter アプリで Stream を使う方法は？

StreamBuilder ウィジェット を使いましょう。

StreamBuilder はストリームから流れるイベントを取得します。

新しいイベントごとに小要素を再作成し、最新イベントに与え連携させます。

StreamBuilder に Stream を与えることから始めます。

組み込むだけで、あとは Builder に任せるだけです。

snapshot を渡し、アプリの当該部分の外観を宣言します。

初期データを与えて、最初のイベントの待機中に、ウィジェットを表示させることできます。

さもなければ snapshot にデータが存在するか必ず確認します。

まだであればローディングインジケータを表示してもよいでしょう。

詳しくは ConnectionState を確認します。

いつもどおりエラーも確認しましょう。

snapshot.hasError が便利です。

StreamBuilder は、データ元が Firebase でもセンサーイベントでも、ネットワーク接続状態でもお使いいただけます。
